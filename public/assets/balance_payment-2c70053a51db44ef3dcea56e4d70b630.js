function show_msg(e){alert(e)}$(document).ready(function(){$("#credit_card_0").click(function(){$("#bank_account_info").hide(),$("#credit_card_info").slideDown(500)}),$("#bank_account_1").click(function(){$("#credit_card_info").hide(),$("#bank_account_info").slideDown(500)}),$("#ba-submit").click(function(e){if(e.preventDefault(),name=$("#ba-name").val(),account_number=$("#ba-an").val(),routing_number=$("#ba-rn").val(),type=$("#ba-type").val(),amount=$("#amount").val(),""==amount||.5>amount)show_msg("Amount could not be less than $ 0.05");else if(0==/^[0-9.]+$/.test(amount))show_msg("Amount could not be less than $ 0.05");else if(""==name)show_msg("Name could not be blank");else if(""==routing_number)show_msg("Please provide valid routing number");else if(""==account_number)show_msg("Please provide valid account number");else if(""==type)show_msg("Please select account type");else{var a={name:name,account_number:account_number,routing_number:routing_number,type:type};balanced.bankAccount.create(a,function(e){switch(e.status){case 201:var a=e.data.uri;$.ajax({type:"POST",url:"/payments/add_bank_account",data:{account_uri:a,amount:$("#amount").val()},beforeSend:function(){$("#processing").show()},complete:function(){$("#processing").hide()},success:function(e){$("#debit_response").html(e.success[0]),$("#credit_response").html(e.success[1])},error:function(){show_msg("There is a problem while making the payment, please try again.")}});break;case 400:show_msg(JSON.stringify(e.error)),$("#ba-submit").show();break;case 402:show_msg(JSON.stringify(e.error)),$("#ba-submit").show();break;case 404:show_msg(JSON.stringify(e.error)),$("#ba-submit").show();break;case 500:show_msg("Something went wrong, please retry the request"),$("#ba-submit").show()}})}}),$("#zip_code_required").hide(),$("#cc-type").change(function(){"American Express"==$(this).val()?$("#zip_code_required").show():$("#zip_code_required").hide()}),$("#cc-submit").click(function(e){if(e.preventDefault(),name=$("#cc-name").val(),card_number=$("#cc-number").val(),expiration_month=$("#cc-em").val(),expiration_year=$("#cc-ey").val(),security_code=$("#cc-csc").val(),card_type=$("#cc-type").val(),postal_code=$("#cc-zip-code").val(),amount=$("#amount").val(),""==amount||.5>amount)show_msg("Amount could not be less than $ 0.05");else if(0==/^[0-9.]+$/.test(amount))show_msg("Amount could not be less than $ 0.05 ");else if(""==name)show_msg("Name could not be blank");else if(""==card_number)show_msg("Please provide valid card number");else if(""==expiration_month)show_msg("Please provide expiration month");else if(""==expiration_year)show_msg("Please provide expiration year");else if(""==card_type)show_msg("Please select a card type");else if(""==security_code)show_msg("Please enter security code");else if("American Express"==card_type&&""==postal_code)show_msg("For american express card it is mandatory to enter the zip code");else{var a={name:name,card_number:card_number,expiration_month:expiration_month,expiration_year:expiration_year,security_code:security_code,card_type:card_type,postal_code:postal_code};balanced.card.create(a,function(e){switch(e.status){case 201:var a=e.data.uri;proposal_token=$("#proposal_token").val(),amount=$("#proposal_amount").val(),one_time_payment=$("#one_time_payment").val(),$.ajax({type:"POST",url:"/payments/add_credit_card",data:{card_uri:a,amount:$("#amount").val()},beforeSend:function(){$("#processing").show()},complete:function(){$("#processing").hide()},success:function(e){$("#debit_response").html(e.success[0]),$("#credit_response").html(e.success[1])},error:function(){show_msg("There is a problem while making the payment, please try again.")}});break;case 400:show_msg(JSON.stringify(e.error)),$("#cc-submit").show();break;case 402:show_msg(JSON.stringify(e.error)),$("#cc-submit").show();break;case 404:show_msg(JSON.stringify(e.error)),$("#cc-submit").show();break;case 500:show_msg("Something went wrong, please retry the request"),$("#cc-submit").show()}})}})});